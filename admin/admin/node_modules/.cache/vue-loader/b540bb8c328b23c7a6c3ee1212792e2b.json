{"remainingRequest":"C:\\Users\\Lenovo\\Desktop\\CRM\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lenovo\\Desktop\\CRM\\admin\\admin\\src\\views\\order\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Lenovo\\Desktop\\CRM\\admin\\admin\\src\\views\\order\\index.vue","mtime":1670931340547},{"path":"C:\\Users\\Lenovo\\Desktop\\CRM\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666323412932},{"path":"C:\\Users\\Lenovo\\Desktop\\CRM\\admin\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1666323415343},{"path":"C:\\Users\\Lenovo\\Desktop\\CRM\\admin\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666323412932},{"path":"C:\\Users\\Lenovo\\Desktop\\CRM\\admin\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1666323415965}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMuJGh0dHAuZ2V0KAogICAgICAgICAgICBgL3JvbGUvZ2V0Um9sZT91aWQ9JHtKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyZGF0YScpKS5pZH1gLHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyZGF0YScpKS50b2tlbgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgKS50aGVuKHJlcz0+ewogICAgICAgICAgICBsZXQgUm9sZU5hbWU9cmVzLmRhdGEub2JqOwogICAgICAgICAgICBpZihSb2xlTmFtZS5pbmNsdWRlcyh0aGlzLnBhZ2VOYW1lKSl7CiAgICAgICAgICAgICAgICB0aGlzLmhhc1JvbGU9dHJ1ZTsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICB0aGlzLmhhc1JvbGU9ZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYodGhpcy5oYXNSb2xlPT1mYWxzZSl7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLml6DmnYPorr/pl64iKTsKICAgICAgICAgICAgICAgIHRoaXMuanVtcCgiLzQwNCIpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMub3JkZXJkYXRhKCk7CiAgICAgICAgfSkKICAgIH0sCgogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBoYXNSb2xlOm51bGwsCiAgICAgICAgICAgIHBhZ2VOYW1lOiLorqLljZXnrqHnkIYiLAoKCiAgICAgICAgICAgIG9yZGVyX25vX3NlbGVjdDoiIiwKICAgICAgICAgICAgdGl0bGVfc2VsZWN0OiIiLAogICAgICAgICAgICBvcmRlcl9zdGF0dXNfc2VsZWN0OiIiLAoKICAgICAgICAgICAgdG90YWw6IDAsCiAgICAgICAgICAgIHBhZ2VzaXplOiA4LAogICAgICAgICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgICAgICAgaXRlbTp7fSwvL+imgei0reS5sOeahOWVhuWTgQogICAgICAgICAgICBvcmRlcjp7fSwvL+WIm+W7uueahOiuouWNlQogICAgICAgICAgICB1c2VyOnt9LAogICAgICAgICAgICB1aWQ6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJkYXRhJykpLmlkLAogICAgICAgIH07CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC8vdGhpcy5qdW1wKCIvNDA0Iik7CiAgICAgICAganVtcChwYXRoKSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHBhdGgpOwogICAgICAgIH0sCiAgICAgICAgLy8g6I635Y+W56ys5LiA6aG16KGo5qC85pWw5o2uCiAgICAgICAgYXN5bmMgb3JkZXJkYXRhKCkgewogICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLiRodHRwLmdldCgKICAgICAgICAgICAgICAgIGAvbW5wYXkvbGlzdD9jdXJyZW50UGFnZT0kezF9JnNpemU9JHt0aGlzLnBhZ2VzaXplfWAsewogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcmRhdGEnKSkudG9rZW4KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzdWx0LmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSBOdW1iZXIocmVzdWx0LmRhdGEudG90YWwpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy50YWJsZURhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgYXN5bmMgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgICAgICAgaWYodGhpcy5vcmRlcl9ub19zZWxlY3Q9PSIiJiZ0aGlzLm9yZGVyX3N0YXR1c19zZWxlY3Q9PSIiJiZ0aGlzLnRpdGxlX3NlbGVjdD09IiIpewogICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoCiAgICAgICAgICAgICAgICAgICAgYC9tbnBheS9saXN0P2N1cnJlbnRQYWdlPSR7dmFsfSZzaXplPSR7dGhpcy5wYWdlc2l6ZX1gLHsKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcmRhdGEnKSkudG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXN1bHQuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSBOdW1iZXIocmVzdWx0LmRhdGEudG90YWwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KAogICAgICAgICAgICAgICAgICAgIGAvbW5wYXkvY29uZGl0aW9uU2VsZWN0P2N1cnJlbnRQYWdlPSR7MX0mc2l6ZT0ke3RoaXMucGFnZXNpemV9Jm9yZGVyX25vPSR7dGhpcy5vcmRlcl9ub19zZWxlY3R9JnRpdGxlPSR7dGhpcy50aXRsZV9zZWxlY3R9Jm9yZGVyX3N0YXR1cz0ke3RoaXMub3JkZXJfc3RhdHVzX3NlbGVjdH1gLHsKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcmRhdGEnKSkudG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXN1bHQuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWwgPSBOdW1iZXIocmVzdWx0LmRhdGEudG90YWwpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuafpeivouWksei0pSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgLy/mnaHku7bmn6Xor6IKICAgICAgICBhc3luYyBjb25kaXRpb25TZWxlY3QoKXsKICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZT0xOwogICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLiRodHRwLmdldCgKICAgICAgICAgICAgICAgIGAvbW5wYXkvY29uZGl0aW9uU2VsZWN0P2N1cnJlbnRQYWdlPSR7MX0mc2l6ZT0ke3RoaXMucGFnZXNpemV9Jm9yZGVyX25vPSR7dGhpcy5vcmRlcl9ub19zZWxlY3R9JnRpdGxlPSR7dGhpcy50aXRsZV9zZWxlY3R9Jm9yZGVyX3N0YXR1cz0ke3RoaXMub3JkZXJfc3RhdHVzX3NlbGVjdH1gLHsKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJkYXRhJykpLnRva2VuCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlc3VsdC5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gTnVtYmVyKHJlc3VsdC5kYXRhLnRvdGFsKTsKICAgICAgICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuafpeivouaIkOWKnyIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5p+l6K+i5aSx6LSlIik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"index.vue","sourceRoot":"src/views/order","sourcesContent":["<!--用户列表-->\r\n<template>\r\n    <div>\r\n        <el-card class=\"box-card\" style=\"width: 100%\">\r\n            <el-breadcrumb style=\"margin-bottom:15px;\" separator=\"/\">\r\n                <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n                <el-breadcrumb-item :to=\"{ path: '/commoditydetail' }\">商店管理</el-breadcrumb-item>\r\n                <el-breadcrumb-item>订单管理</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n            <el-divider></el-divider>\r\n            <div style=\"display: flex\">\r\n                <div style=\"padding: 10px 0;margin-right: 100px;\">\r\n                    <el-input v-model=\"order_no_select\" class=\"ml-5\" suffix-icon=\"el-icon-search\" placeholder=\"请输入订单号\" style=\"width: 200px;margin:10px;\"></el-input>\r\n                    <el-input v-model=\"title_select\" class=\"ml-5\" suffix-icon=\"el-icon-search\" placeholder=\"请输入物品名称\" style=\"width: 200px;margin:10px;\"></el-input>\r\n                    <el-input v-model=\"order_status_select\" class=\"ml-5\" suffix-icon=\"el-icon-search\" placeholder=\"请输入订单状态\" style=\"width: 200px;margin:10px;\"></el-input>\r\n                    <el-button @click=\"conditionSelect\" class=\"ml-5\" type=\"primary\">搜索</el-button>\r\n                </div>\r\n                <div></div>\r\n            </div>\r\n            <el-table\r\n                    :data=\"tableData\"\r\n                    border\r\n                    :row-style=\"{ height: '50px' }\"\r\n                    :cell-style=\"{ padding: '0px' }\"\r\n                    max-height=\"550\"\r\n                    style=\"width: 95%;\"\r\n            >\r\n                <el-table-column prop=\"orderNo\" label=\"订单号\" width=\"190\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"username\" label=\"用户名\" width=\"100\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"title\" label=\"物品名称\" width=\"140\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"totalFee\" label=\"现金\" width=\"60\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"point\" label=\"积分\" width=\"50\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"name\" label=\"姓名\" width=\"60\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"phone\" label=\"电话\" width=\"95\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"address\" label=\"地址\" width=\"170\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"orderStatus\" label=\"订单状态\" width=\"75\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"paymentType\" label=\"支付方式\" width=\"75\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"createTime\" label=\"订单创建时间\" width=\"140\">\r\n                </el-table-column>\r\n            </el-table>\r\n            <!-- 分页 -->\r\n            <div class=\"block\" style=\"margin-top: 20px;\">\r\n                <el-pagination\r\n                        @current-change=\"handleCurrentChange\"\r\n                        :current-page.sync=\"currentPage\"\r\n                        :page-size=\"pagesize\"\r\n                        layout=\"prev, pager, next, jumper,->,total\"\r\n                        :total=\"total\"\r\n                >\r\n                </el-pagination>\r\n            </div>\r\n\r\n\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import axios from \"axios\";\r\n\r\n    export default {\r\n        mounted() {\r\n            this.$http.get(\r\n                `/role/getRole?uid=${JSON.parse(localStorage.getItem('userdata')).id}`,{\r\n                    headers: {\r\n                        Authorization: \"Bearer \" + JSON.parse(localStorage.getItem('userdata')).token\r\n                    }\r\n                }\r\n            ).then(res=>{\r\n                let RoleName=res.data.obj;\r\n                if(RoleName.includes(this.pageName)){\r\n                    this.hasRole=true;\r\n                }else{\r\n                    this.hasRole=false;\r\n                }\r\n                if(this.hasRole==false){\r\n                    this.$message.error(\"无权访问\");\r\n                    this.jump(\"/404\");\r\n                    return;\r\n                }\r\n                this.orderdata();\r\n            })\r\n        },\r\n\r\n        data() {\r\n            return {\r\n                hasRole:null,\r\n                pageName:\"订单管理\",\r\n\r\n\r\n                order_no_select:\"\",\r\n                title_select:\"\",\r\n                order_status_select:\"\",\r\n\r\n                total: 0,\r\n                pagesize: 8,\r\n                currentPage: 1,\r\n                tableData: [],\r\n                item:{},//要购买的商品\r\n                order:{},//创建的订单\r\n                user:{},\r\n                uid: JSON.parse(localStorage.getItem('userdata')).id,\r\n            };\r\n        },\r\n        methods: {\r\n            //this.jump(\"/404\");\r\n            jump(path) {\r\n                this.$router.push(path);\r\n            },\r\n            // 获取第一页表格数据\r\n            async orderdata() {\r\n                const result = await this.$http.get(\r\n                    `/mnpay/list?currentPage=${1}&size=${this.pagesize}`,{\r\n                        headers: {\r\n                            Authorization: \"Bearer \" + JSON.parse(localStorage.getItem('userdata')).token\r\n                        }\r\n                    }\r\n                );\r\n                if (result.status === 200) {\r\n                    this.tableData = result.data.data;\r\n                    this.total = Number(result.data.total);\r\n                    console.log(this.tableData);\r\n                }\r\n            },\r\n\r\n            async handleCurrentChange(val) {\r\n                if(this.order_no_select==\"\"&&this.order_status_select==\"\"&&this.title_select==\"\"){\r\n                    const result = await this.$http.get(\r\n                        `/mnpay/list?currentPage=${val}&size=${this.pagesize}`,{\r\n                            headers: {\r\n                                Authorization: \"Bearer \" + JSON.parse(localStorage.getItem('userdata')).token\r\n                            }\r\n                        }\r\n                    );\r\n                    if (result.status === 200) {\r\n                        this.tableData = result.data.data;\r\n                        this.total = Number(result.data.total);\r\n                    }\r\n                }else{\r\n                    const result = await this.$http.get(\r\n                        `/mnpay/conditionSelect?currentPage=${1}&size=${this.pagesize}&order_no=${this.order_no_select}&title=${this.title_select}&order_status=${this.order_status_select}`,{\r\n                            headers: {\r\n                                Authorization: \"Bearer \" + JSON.parse(localStorage.getItem('userdata')).token\r\n                            }\r\n                        }\r\n                    );\r\n                    if (result.status === 200) {\r\n                        this.tableData = result.data.data;\r\n                        this.total = Number(result.data.total);\r\n                        this.$forceUpdate();\r\n                    } else {\r\n                        this.$message.error(\"查询失败\");\r\n                    }\r\n                }\r\n            },\r\n\r\n            //条件查询\r\n            async conditionSelect(){\r\n                this.currentPage=1;\r\n                const result = await this.$http.get(\r\n                    `/mnpay/conditionSelect?currentPage=${1}&size=${this.pagesize}&order_no=${this.order_no_select}&title=${this.title_select}&order_status=${this.order_status_select}`,{\r\n                        headers: {\r\n                            Authorization: \"Bearer \" + JSON.parse(localStorage.getItem('userdata')).token\r\n                        }\r\n                    }\r\n                );\r\n                if (result.status === 200) {\r\n                    this.tableData = result.data.data;\r\n                    this.total = Number(result.data.total);\r\n                    this.$forceUpdate();\r\n                    this.$message.success(\"查询成功\");\r\n                } else {\r\n                    this.$message.error(\"查询失败\");\r\n                }\r\n            },\r\n\r\n        },\r\n    };\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .carid {\r\n        display: none;\r\n    }\r\n    .demo-form-inline {\r\n        display: flex;\r\n        flex: left;\r\n    }\r\n    .el-form-item {\r\n        margin-bottom: 20px;\r\n    }\r\n    .avatar-uploader .el-upload {\r\n        border: 1px dashed #d9d9d9;\r\n        border-radius: 100px;\r\n        cursor: pointer;\r\n        position: relative;\r\n        overflow: hidden;\r\n    }\r\n    // .avatar-uploader .el-upload:hover {\r\n    // //   border-color: #409eff;\r\n    // }\r\n    .avatar-uploader-icon {\r\n        font-size: 28px;\r\n        color: #8c939d;\r\n        width: 178px;\r\n        height: 178px;\r\n        line-height: 178px;\r\n        text-align: center;\r\n    }\r\n    .avatar {\r\n        width: 250px;\r\n        /*display: block;*/\r\n        /*border-radius: 100px;*/\r\n    }\r\n</style>\r\n"]}]}