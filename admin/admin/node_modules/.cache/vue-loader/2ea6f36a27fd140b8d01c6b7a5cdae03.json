{"remainingRequest":"C:\\Users\\Lenovo\\Desktop\\blog\\blogadmin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Lenovo\\Desktop\\blog\\blogadmin\\src\\views\\videoone\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Lenovo\\Desktop\\blog\\blogadmin\\src\\views\\videoone\\index.vue","mtime":1670673724021},{"path":"C:\\Users\\Lenovo\\Desktop\\blog\\blogadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666323412932},{"path":"C:\\Users\\Lenovo\\Desktop\\blog\\blogadmin\\node_modules\\babel-loader\\lib\\index.js","mtime":1666323415343},{"path":"C:\\Users\\Lenovo\\Desktop\\blog\\blogadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666323412932},{"path":"C:\\Users\\Lenovo\\Desktop\\blog\\blogadmin\\node_modules\\vue-loader\\lib\\index.js","mtime":1666323415965}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaGFzUm9sZTpudWxsLAogICAgICAgICAgICBwYWdlTmFtZToi6L2u5pKt5YiX6KGoIiwKCiAgICAgICAgICAgIG5hbWVfc2VsZWN0OiIiLAogICAgICAgICAgICAvLyDop4bpopEKICAgICAgICAgICAgYWRtaW5MaXN0OiBbXSwKICAgICAgICAgICAgLy8g5YiG6aG1CiAgICAgICAgICAgIHNpemU6NiwKICAgICAgICAgICAgdG90YWw6MCwKICAgICAgICAgICAgY3VycmVudFBhZ2U6MSwKICAgICAgICB9OwogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy4kaHR0cC5nZXQoCiAgICAgICAgICAgIGAvcm9sZS9nZXRSb2xlP3VpZD0ke0pTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJkYXRhJykpLmlkfWAsewogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJkYXRhJykpLnRva2VuCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICApLnRoZW4ocmVzPT57CiAgICAgICAgICAgIGxldCBSb2xlTmFtZT1yZXMuZGF0YS5vYmo7CiAgICAgICAgICAgIGlmKFJvbGVOYW1lLmluY2x1ZGVzKHRoaXMucGFnZU5hbWUpKXsKICAgICAgICAgICAgICAgIHRoaXMuaGFzUm9sZT10cnVlOwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHRoaXMuaGFzUm9sZT1mYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZih0aGlzLmhhc1JvbGU9PWZhbHNlKXsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaXoOadg+iuv+mXriIpOwogICAgICAgICAgICAgICAgdGhpcy5qdW1wKCIvNDA0Iik7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5pbml0VmlkZW9MaXN0KCk7CiAgICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICAgICAgfSkKCiAgICB9LAogICAgYmVmb3JlRGVzdHJveSgpIHsKICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5lbGVtZW50OyBpbmRleCsrKSB7CiAgICAgICAgICAgIHRoaXMuJHZpZGVvcyhgbXlWaWRlb3Mke2luZGV4fWApLmRpc3Bvc2UoKTsKICAgICAgICB9CiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgICAvL3RoaXMuanVtcCgiLzQwNCIpOwogICAgICAgIGp1bXAocGF0aCkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaChwYXRoKTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIGN1cnJlbnRDaGFuZ2UoY3VycmVudFBhZ2UpewogICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gY3VycmVudFBhZ2U7CiAgICAgICAgICAgIHRoaXMuaW5pdFZpZGVvTGlzdCgpOwogICAgICAgIH0sCiAgICAgICAgc2l6ZUNoYW5nZShzaXplKXsKICAgICAgICAgICAgdGhpcy5zaXplID0gc2l6ZTsKICAgICAgICAgICAgdGhpcy5pbml0VmlkZW9MaXN0KCk7CiAgICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICAgICAgfSwKCiAgICAgICAgLy8g6KeG6aKR5pKt5pS+CiAgICAgICAgaW5pdFZpZGVvKCkgewogICAgICAgICAgICBsZXQgZWxlbWVudExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIudmlkZW8tanMiKTsKICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudExpc3QubGVuZ3RoOyAvL3ZpZGVvanMg5pWw6YeP6LWL5YC8CiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBlbGVtZW50TGlzdC5sZW5ndGg7IGluZGV4KyspIHsKICAgICAgICAgICAgICAgIGxldCBpZCA9IGVsZW1lbnRMaXN0W2luZGV4XS5nZXRBdHRyaWJ1dGUoImlkIik7CiAgICAgICAgICAgICAgICB0aGlzLiR2aWRlb3MoCiAgICAgICAgICAgICAgICAgICAgaWQsCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBhdXRvcGxheTogZmFsc2UsIC8v6Ieq5Yqo5pKt5pS+CiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgbXV0ZWQ6ZmFsc2UsIC8vIOaYr+WQpumdmemfsywKICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbHM6IHRydWUsIC8v5o6n5Yi25p2hCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgdGVjaE9yZGVyOiBbJ2h0bWw1JywnZmxhc2gnXSwvL+iuvue9rmZsYXNo5pKt5pS+CiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlOiAiZW4iLCAvLyDliJ3lp4vljJbor63oqIAKICAgICAgICAgICAgICAgICAgICAgICAgcHJlbG9hZDogImF1dG8iLCAvLyDpooTliqDovb0KICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICIyNTAiLAogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICIxMjAiLAogICAgICAgICAgICAgICAgICAgICAgICAvLyDlgI3pgJ/mkq3mlL4KICAgICAgICAgICAgICAgICAgICAgICAgcGxheWJhY2tSYXRlczogWzAuNSwgMSwgMS41LCAyXSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52b2x1bWUoMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8v6L+Z5Liq5Zyw5pa55b6I6YeN6KaBLOS4gOaXpuS9oOeahG11dGVkIOS4jei1t+S9nOeUqCAs5bCx5LiA5a6a6KaB5Zyo6K6+572u5b2T5YmN55qE6KeG6aKR5Zue6LCD5Lit6K6+572u5aOw6Z+z5Li6MAogICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMucGxheSgpOyAvL+i/meS4quWcsOaWueS5n+S4gOagtyAs5q2k5pa55rOVdGhpcy5wbGF5KCk9PWF1dG9wbGF5ICDmmK/mnInnm7jlkIznmoTmlYjmnpwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbmUoInBsYXlpbmciLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDnm5HlkKzmkq3mlL4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLmiJDlip/liJ3lp4vljJbop4bpopEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uZSgiZXJyb3IiLCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOebkeWQrOmUmeivrwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigi55uR5ZCs5byC5bi4IiwgZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgaW5pdFZpZGVvTGlzdCgpewogICAgICAgICAgICB0aGlzLiRodHRwLmdldCgnL3ZpZGVvb25lL2xpc3Q/Y3VycmVudFBhZ2U9Jyt0aGlzLmN1cnJlbnRQYWdlKyImc2l6ZT0iK3RoaXMuc2l6ZSx7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcmRhdGEnKSkudG9rZW4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbihyZXNwPT57CiAgICAgICAgICAgICAgICBpZihyZXNwLnN0YXR1cz09PTIwMCl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3AuZGF0YS50b3RhbDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFkbWluTGlzdCA9IHJlc3AuZGF0YS5vYmo7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0VmlkZW8oKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIC8vIOWIoOmZpOinhumikQogICAgICAgIGRlbGV0ZXZpZGVvKGlkKSB7CiAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0oIuatpOaTjeS9nOWwhuawuOS5heWIoOmZpCwg5piv5ZCm57un57utPyIsICLmj5DnpLoiLCB7CiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJGh0dHAuZGVsZXRlKGAvdmlkZW9vbmUvZGVsZXRlP2lkPSR7aWR9YCx7CiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJkYXRhJykpLnRva2VuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5kYXRhLmNvZGU9PTIwMCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXN1bHQuZGF0YS5tZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0VmlkZW9MaXN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzdWx0LmRhdGEubWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/videoone","sourcesContent":["<!--视频列表-->\r\n<template>\r\n    <div style=\"text-align: left\">\r\n        <el-card>\r\n            <el-breadcrumb style=\"margin-bottom:15px;\" separator=\"/\">\r\n                <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n                <el-breadcrumb-item :to=\"{ path: '/videoone' }\">轮播视频</el-breadcrumb-item>\r\n                <el-breadcrumb-item>轮播列表</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n            <el-divider></el-divider>\r\n            <el-row>\r\n                <el-col :span=\"8\" v-for=\"(item, i) in adminList\" :key=\"i\">\r\n                    <div class=\"mr30 mt10\">\r\n                        <div style=\"display:flex;margin-top: 10px;\">\r\n                            <div class=\"video-title\" style=\"text-align: center\">{{ item.name }}</div>\r\n                            <el-button type=\"danger\" style=\"margin-left:10px;margin-bottom: 10px;\" @click=\"deletevideo(item.id)\">删除</el-button>\r\n                        </div>\r\n                        <video\r\n                                ref=\"video\"\r\n                                :id=\"'myVideos' + i\"\r\n                                class=\"video-js vjs-default-skin vjs-big-play-centered mt10\"\r\n                                @click=\"toplay(item.id)\"\r\n                        >\r\n                            <source :src=\"item.videoUrl\" />\r\n                        </video>\r\n                    </div>\r\n                </el-col>\r\n            </el-row>\r\n            <el-pagination\r\n                    @current-change=\"currentChange\"\r\n                    @size-change=\"sizeChange\"\r\n                    :current-page.sync=\"currentPage\"\r\n                    :page-size=\"size\"\r\n                    layout=\"prev, pager, next, jumper, ->, total\"\r\n                    :total=\"total\"\r\n                    style=\"text-align: center; margin-top: 20px;\">\r\n            </el-pagination>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                hasRole:null,\r\n                pageName:\"轮播列表\",\r\n\r\n                name_select:\"\",\r\n                // 视频\r\n                adminList: [],\r\n                // 分页\r\n                size:6,\r\n                total:0,\r\n                currentPage:1,\r\n            };\r\n        },\r\n        mounted() {\r\n            this.$http.get(\r\n                `/role/getRole?uid=${JSON.parse(localStorage.getItem('userdata')).id}`,{\r\n                    headers: {\r\n                        Authorization: \"Bearer \" + JSON.parse(localStorage.getItem('userdata')).token\r\n                    }\r\n                }\r\n            ).then(res=>{\r\n                let RoleName=res.data.obj;\r\n                if(RoleName.includes(this.pageName)){\r\n                    this.hasRole=true;\r\n                }else{\r\n                    this.hasRole=false;\r\n                }\r\n                if(this.hasRole==false){\r\n                    this.$message.error(\"无权访问\");\r\n                    this.jump(\"/404\");\r\n                    return;\r\n                }\r\n                this.initVideoList();\r\n                this.$forceUpdate();\r\n            })\r\n\r\n        },\r\n        beforeDestroy() {\r\n            for (let index = 0; index < this.element; index++) {\r\n                this.$videos(`myVideos${index}`).dispose();\r\n            }\r\n        },\r\n\r\n        methods: {\r\n            //this.jump(\"/404\");\r\n            jump(path) {\r\n                this.$router.push(path);\r\n            },\r\n            async currentChange(currentPage){\r\n                this.currentPage = currentPage;\r\n                this.initVideoList();\r\n            },\r\n            sizeChange(size){\r\n                this.size = size;\r\n                this.initVideoList();\r\n                this.$forceUpdate();\r\n            },\r\n\r\n            // 视频播放\r\n            initVideo() {\r\n                let elementList = document.querySelectorAll(\".video-js\");\r\n                this.element = elementList.length; //videojs 数量赋值\r\n                for (let index = 0; index < elementList.length; index++) {\r\n                    let id = elementList[index].getAttribute(\"id\");\r\n                    this.$videos(\r\n                        id,\r\n                        {\r\n                            autoplay: false, //自动播放\r\n                            //   muted:false, // 是否静音,\r\n                            controls: true, //控制条\r\n                            //   techOrder: ['html5','flash'],//设置flash播放\r\n                            language: \"en\", // 初始化语言\r\n                            preload: \"auto\", // 预加载\r\n                            width: \"250\",\r\n                            height: \"120\",\r\n                            // 倍速播放\r\n                            playbackRates: [0.5, 1, 1.5, 2],\r\n                        },\r\n                        function () {\r\n                            this.volume(0);\r\n                            //这个地方很重要,一旦你的muted 不起作用 ,就一定要在设置当前的视频回调中设置声音为0\r\n                            //this.play(); //这个地方也一样 ,此方法this.play()==autoplay  是有相同的效果\r\n                            this.one(\"playing\", function () {\r\n                                // 监听播放\r\n                                console.log(\"成功初始化视频\");\r\n                            });\r\n\r\n                            this.one(\"error\", function (error) {\r\n                                // 监听错误\r\n                                console.error(\"监听异常\", error);\r\n                            });\r\n                        }\r\n                    );\r\n                }\r\n            },\r\n\r\n            initVideoList(){\r\n                this.$http.get('/videoone/list?currentPage='+this.currentPage+\"&size=\"+this.size,{\r\n                    headers: {\r\n                        Authorization: \"Bearer \" + JSON.parse(localStorage.getItem('userdata')).token\r\n                    }\r\n                }).then(resp=>{\r\n                    if(resp.status===200){\r\n                        this.total = resp.data.total;\r\n                        this.adminList = resp.data.obj;\r\n                        this.initVideo();\r\n                        this.$forceUpdate();\r\n                    }\r\n\r\n                })\r\n            },\r\n            // 删除视频\r\n            deletevideo(id) {\r\n                this.$confirm(\"此操作将永久删除, 是否继续?\", \"提示\", {\r\n                    confirmButtonText: \"确定\",\r\n                    cancelButtonText: \"取消\",\r\n                    type: \"warning\",\r\n                })\r\n                    .then(async() => {\r\n                        const result = await this.$http.delete(`/videoone/delete?id=${id}`,{\r\n                            headers: {\r\n                                Authorization: \"Bearer \" + JSON.parse(localStorage.getItem('userdata')).token\r\n                            }\r\n                        })\r\n                        if(result.data.code==200){\r\n                            this.$message.success(result.data.message);\r\n                            this.initVideoList();\r\n                            this.$forceUpdate();\r\n                        }else{\r\n                            this.$message.error(result.data.message);\r\n                        }\r\n                    })\r\n            },\r\n        },\r\n    };\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n    .fontExtraLarge {\r\n        white-space: nowrap;\r\n        overflow: hidden !important;\r\n        text-overflow: ellipsis;\r\n        width: 250px;\r\n        // background-color: antiquewhite;\r\n        text-align: left;\r\n    }\r\n    .video-title{\r\n        white-space: nowrap;\r\n        width: 300px;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        color: #555555;\r\n        height: 30px;\r\n        line-height: 30px;\r\n        font-weight: bold;\r\n        font-size: 20px;\r\n        text-align: left;\r\n    }\r\n</style>\r\n"]}]}