{"remainingRequest":"E:\\vue\\blog(1)\\blogadmin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\vue\\blog(1)\\blogadmin\\src\\views\\blackdetail\\index.vue?vue&type=style&index=0&id=3ec2f22e&lang=less&scoped=true&","dependencies":[{"path":"E:\\vue\\blog(1)\\blogadmin\\src\\views\\blackdetail\\index.vue","mtime":1653732053399},{"path":"E:\\vue\\blog(1)\\blogadmin\\node_modules\\css-loader\\dist\\cjs.js","mtime":1666323413935},{"path":"E:\\vue\\blog(1)\\blogadmin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1666323416977},{"path":"E:\\vue\\blog(1)\\blogadmin\\node_modules\\postcss-loader\\src\\index.js","mtime":1666323415315},{"path":"E:\\vue\\blog(1)\\blogadmin\\node_modules\\less-loader\\dist\\cjs.js","mtime":1666323414827},{"path":"E:\\vue\\blog(1)\\blogadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1666323412932},{"path":"E:\\vue\\blog(1)\\blogadmin\\node_modules\\vue-loader\\lib\\index.js","mtime":1666323415965}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmNhcmlkew0KICBkaXNwbGF5Om5vbmU7DQp9DQouZGVtby1mb3JtLWlubGluZXsNCiAgZGlzcGxheTpmbGV4Ow0KICBmbGV4OiBsZWZ0Ow0KfQ0KLmVsLWZvcm0taXRlbXsNCiAgICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4aA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/blackdetail","sourcesContent":["<template>\r\n  <div>\r\n    <el-card class=\"box-card\">\r\n        <h3 class=\"title\">黑名单用户</h3>\r\n        <!-- 添加信息 -->\r\n        <el-form :inline=\"true\" :model=\"formInline\" class=\"demo-form-inline\">\r\n          <el-form-item label=\"信息:\">\r\n            <el-input v-model=\"formInline.user\" placeholder=\"请输入内容\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"onSubmit\">查询</el-button>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\"  @click=\"dialogFormVisible = true\">添加</el-button>\r\n            <el-dialog title=\"添加用户\" :visible.sync=\"dialogFormVisible\" width=\"40%\"\r\n  :before-close=\"handleClose\">\r\n              <el-form :model=\"form\" style=\"form\" :rules=\"loginFormRules\" ref=\"loginFormRef\">\r\n                <el-form-item label=\"用户名:\" :label-width=\"formLabelWidth\" prop=\"name\">\r\n                  <el-input v-model=\"form.name\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"手机号码:\" :label-width=\"formLabelWidth\" prop=\"tel\">\r\n                  <el-input v-model=\"form.tel\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"密码:\" :label-width=\"formLabelWidth\" prop=\"password\">\r\n                  <el-input v-model=\"form.password\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"科研研究方向:\" :label-width=\"formLabelWidth\">\r\n                  <el-select v-model=\"form.filed\" placeholder=\"请选择科研研究方向\">\r\n                    <el-option label=\"合成化学\" value=\"合成化学\"></el-option>\r\n                    <el-option label=\"催化与表界面化学\" value=\"催化与表界面化学\"></el-option>\r\n                    <el-option label=\"化学理论与机制\" value=\"化学理论与机制\"></el-option>\r\n                    <el-option label=\"化学测量学\" value=\"化学测量学\"></el-option>\r\n                    <el-option label=\"材料化学\" value=\"材料化学\"></el-option>\r\n                    <el-option label=\"环境化学\" value=\"环境化学\"></el-option>\r\n                    <el-option label=\"化学生物学\" value=\"化学生物学\"></el-option>\r\n                    <el-option label=\"化学工程与工业化学\" value=\"化学工程与工业化学\"></el-option>\r\n                    <el-option label=\"能源化学\" value=\"能源化学\"></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"性别:\" :label-width=\"formLabelWidth\">\r\n                  <el-select v-model=\"form.sex\" placeholder=\"请选择性别\">\r\n                    <el-option label=\"男\" value=\"男\"></el-option>\r\n                    <el-option label=\"女\" value=\"女\"></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"身份:\" :label-width=\"formLabelWidth\">\r\n                  <el-select v-model=\"form.role\" placeholder=\"请选择身份\">\r\n                    <el-option label=\"子管理员\" value=\"子管理员\"></el-option>\r\n                    <el-option label=\"用户\" value=\"用户\"></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"个人简介:\" :label-width=\"formLabelWidth\">\r\n                  <el-input v-model=\"form.introduction\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n              </el-form>\r\n              <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"submitadd()\">确 定</el-button>\r\n              </div>\r\n            </el-dialog>\r\n          </el-form-item>\r\n        </el-form>\r\n        <el-table\r\n          :data=\"tableData\"\r\n          border\r\n          :row-style=\"{height:'15px'}\"\r\n          :cell-style=\"{padding:'0px'}\"\r\n          max-height=\"450\"\r\n          style=\"width: 95%\">\r\n          <el-table-column\r\n            fixed\r\n            v-if=\"false\"\r\n            prop=\"id\"\r\n            label=\"用户id\"\r\n            width=\"100\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            fixed\r\n            label=\"用户头像\"\r\n            width=\"150\">\r\n            <template slot-scope=\"scope\">\r\n              <el-image\r\n                style=\"width: 80px; height: 80px\"\r\n                :src=\"scope.row.imgurl\"\r\n                fit=\"contain\"\r\n                v-if=\"scope.row.imgurl !==''\"></el-image>\r\n               <span v-else>无图片</span> \r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"name\"\r\n            label=\"用户名\"\r\n            width=\"190\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"filed\"\r\n            label=\"研究方向\"\r\n            width=\"100\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"introduction\"\r\n            label=\"简介\"\r\n            width=\"150\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"sex\"\r\n            label=\"性别\"\r\n            width=\"100\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"tel\"\r\n            label=\"电话\"\r\n            width=\"150\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"password\"\r\n            label=\"密码\"\r\n            width=\"100\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            prop=\"role\"\r\n            label=\"身份\"\r\n            width=\"100\">\r\n          </el-table-column>\r\n          <el-table-column\r\n            fixed=\"right\"\r\n            label=\"操作\"\r\n            width=\"100\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button @click=\"handleClick(scope.row)\" type=\"text\" size=\"small\">编辑</el-button>\r\n               <!-- 编辑 -->\r\n           <el-dialog title=\"修改用户信息\" :visible.sync=\"dialogFormVisible1\" width=\"40%\"\r\n              :before-close=\"handleClose\" append-to-body center>\r\n              <el-form :model=\"form1\" style=\"form1\" :rules=\"loginFormRules\" ref=\"loginFormRef\">\r\n                <el-form-item label=\"用户名:\" :label-width=\"formLabelWidth\" prop=\"name\">\r\n                  <el-input v-model=\"form1.name\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"手机号码:\" :label-width=\"formLabelWidth\" prop=\"tel\">\r\n                  <el-input v-model=\"form1.tel\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"密码:\" :label-width=\"formLabelWidth\" prop=\"password\">\r\n                  <el-input v-model=\"form1.password\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"科研研究方向:\" :label-width=\"formLabelWidth\">\r\n                  <el-select v-model=\"form1.filed\" placeholder=\"请选择科研研究方向\">\r\n                    <el-option label=\"合成化学\" value=\"合成化学\"></el-option>\r\n                    <el-option label=\"催化与表界面化学\" value=\"催化与表界面化学\"></el-option>\r\n                    <el-option label=\"化学理论与机制\" value=\"化学理论与机制\"></el-option>\r\n                    <el-option label=\"化学测量学\" value=\"化学测量学\"></el-option>\r\n                    <el-option label=\"材料化学\" value=\"材料化学\"></el-option>\r\n                    <el-option label=\"环境化学\" value=\"环境化学\"></el-option>\r\n                    <el-option label=\"化学生物学\" value=\"化学生物学\"></el-option>\r\n                    <el-option label=\"化学工程与工业化学\" value=\"化学工程与工业化学\"></el-option>\r\n                    <el-option label=\"能源化学\" value=\"能源化学\"></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"性别:\" :label-width=\"formLabelWidth\">\r\n                  <el-select v-model=\"form1.sex\" placeholder=\"请选择性别\">\r\n                    <el-option label=\"男\" value=\"男\"></el-option>\r\n                    <el-option label=\"女\" value=\"女\"></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"身份:\" :label-width=\"formLabelWidth\">\r\n                  <el-select v-model=\"form1.role\" placeholder=\"请选择身份\">\r\n                    <el-option label=\"子管理员\" value=\"子管理员\"></el-option>\r\n                    <el-option label=\"用户\" value=\"用户\"></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"个人简介:\" :label-width=\"formLabelWidth\">\r\n                  <el-input v-model=\"form1.introduction\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n              </el-form>\r\n              <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogFormVisible1 = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"editdetail()\">确 定</el-button>\r\n              </div>\r\n            </el-dialog>\r\n              <!-- <el-button type=\"text\" size=\"small\" @click=\"add(scope.row)\" v-if=\"scope.row.deleted!==0\">移除黑名单</el-button> -->\r\n              <el-button type=\"text\" size=\"small\" @click=\"deleteuser(scope.row)\" >&nbsp;&nbsp;&nbsp;&nbsp;移除黑名单</el-button>\r\n              \r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <!-- 分页 -->\r\n        <div class=\"block\">\r\n          <el-pagination\r\n            background\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page.sync=\"currentPage1\"\r\n            :page-size=\"5\"\r\n            layout=\"prev, pager, next, jumper\"\r\n            :total=\"total\">\r\n          </el-pagination>\r\n        </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n export default {\r\n   inject:['reload'],\r\n   created(){\r\n     this.userdata()\r\n   },\r\n    methods: {\r\n      // 获取第一页表格数据\r\n      async userdata(){\r\n        const result = await this.$http.get('/user/enabledNo',{currentPage:1,size:5})\r\n        // console.log(\"用户信息表格\",result)\r\n        // this.tableData = result.data.data\r\n        if(result.status===200){\r\n          this.tableData = result.data.data\r\n        }\r\n      },\r\n      handleClick(row) {\r\n        // 点击编辑获取信息\r\n        this.dialogFormVisible1 = true\r\n        this.form1 = row\r\n        console.log(row);\r\n      },\r\n      handleSizeChange(val) {\r\n        console.log(`每页 ${val} 条`);\r\n      },\r\n     async handleCurrentChange(val) {\r\n        console.log(`当前页: ${val}`);\r\n        const result = await this.$http.get('/user/enabledNo',{currentPage:val,size:5})\r\n        // console.log(\"用户信息表格\",result)\r\n        // this.tableData = result.data.data\r\n        if(result.status===200){\r\n          this.tableData = result.data.data\r\n        }\r\n      },\r\n      handleClose(done) {\r\n        this.$confirm('确认关闭？')\r\n          .then(_ => {\r\n            done();\r\n          })\r\n          .catch(_ => {});\r\n      },\r\n      onSubmit(){\r\n        \r\n      },\r\n      submitadd(){\r\n        this.$refs.loginFormRef.validate(async valid =>{\r\n          if(!valid) return this.$message.error('表单验证失败！')\r\n          // 添加用户信息数据\r\n          console.log(this.form)\r\n          const result = await this.$http.post('/user/add',this.form)\r\n          console.log('adduser',result)\r\n          if(result.data.code===200){\r\n            this.$message.success('添加成功!')\r\n            this.dialogFormVisible = false\r\n            this.reload()\r\n          }else if(result.data.code===500){\r\n            this.$message.error(result.data.message)\r\n          }else{\r\n            this.$message.error(\"添加失败!\")\r\n          }\r\n        })\r\n\r\n      },\r\n      // 修改用户信息\r\n    async editdetail(){\r\n        console.log(\"修改用户信息\",this.form1)\r\n        const result = await this.$http.post('/user/edit',this.form1)\r\n        if(result.data.code===200){\r\n          this.$message.success('修改成功！')\r\n          this.dialogFormVisible1 = false\r\n        }else if(result.data.code===500){\r\n          this.$message.error(result.data.message)\r\n        }else{\r\n          this.$message.error(\"修改失败!\")\r\n        }\r\n\r\n      },\r\n      // 添加黑名单\r\n      add(data){\r\n        this.$confirm('确认将该用户成为黑名单用户？')\r\n          .then(async() => {\r\n            // done();\r\n            console.log(data)\r\n            data.enabled = 1\r\n            console.log(data)\r\n            const result = await this.$http.post('/user/enabled',data)\r\n            if(result.data.code===200){\r\n              this.$message({\r\n                type: 'success',\r\n                message: '添加成功!'\r\n              });\r\n            }else{\r\n              this.$message({\r\n                type: 'info',\r\n                message: '添加失败'\r\n              }); \r\n            }\r\n          })\r\n          .catch(() => {\r\n            this.$message({\r\n            type: 'info',\r\n            message: '添加失败'\r\n          });   \r\n          });\r\n      },\r\n      // 移除黑名单\r\n      deleteuser(data){\r\n        this.$confirm('确认将该用户移除黑名单用户？')\r\n          .then(async () => {\r\n            console.log(data)\r\n            data.enabled = 0\r\n            console.log(data)\r\n            const result = await this.$http.post('/user/enabled',data)\r\n            if(result.data.code===200){\r\n              this.$message({\r\n                type: 'success',\r\n                message: '移除成功!'\r\n              });\r\n              this.reload()\r\n            }else{\r\n              this.$message({\r\n                type: 'info',\r\n                message: '移除失败'\r\n              }); \r\n            }\r\n          })\r\n          .catch(() => {\r\n            this.$message({\r\n            type: 'info',\r\n            message: '移除失败'\r\n          });   \r\n          });\r\n      }\r\n    },\r\n\r\n    data() {\r\n      return {\r\n        total:1000,\r\n        //添加用户对话框\r\n        dialogFormVisible: false,\r\n        form: {\r\n          filed: \"\",\r\n          imgurl: \"\",\r\n          introduction: \"\",\r\n          name: \"\",\r\n          password: \"\",\r\n          role: \"\",\r\n          sex: \"\",\r\n          tel: \"\"\r\n        },\r\n        //修改用户的对话框 \r\n         dialogFormVisible1: false,\r\n        form1: {\r\n          filed: \"\",\r\n          imgurl: \"\",\r\n          introduction: \"\",\r\n          name: \"\",\r\n          password: \"\",\r\n          role: \"\",\r\n          sex: \"\",\r\n          tel: \"\"\r\n        },\r\n        formLabelWidth: '120px',\r\n        // 分页\r\n        currentPage1: 1,\r\n        formInline: {\r\n          user: '',\r\n        },\r\n        tableData:[],\r\n        // tableData: [{\r\n        //   date: '2016-05-02',\r\n        //   name: '王小虎',\r\n        //   province: '上海',\r\n        //   city: '普陀区',\r\n        //   address: '上海市普陀区金沙江路 1518 弄',\r\n        //   zip: 200333\r\n        // },{\r\n        //   filed: \"2324\",\r\n        //   id: 0,\r\n        //   imgurl: \"\",\r\n        //   introduction: \"1111111\",\r\n        //   name: \"2222222222\",\r\n        //   password: \"333333\",\r\n        //   role: \"gg\",\r\n        //   sex: \"greg\",\r\n        //   tel: \"13403945947\"\r\n        // }, {\r\n        //   filed: \"43rq43t\",\r\n        //   id: 0,\r\n        //   imgurl: \"https://img1.baidu.com/it/u=1966616150,2146512490&fm=253&fmt=auto&app=138&f=JPEG?w=751&h=500\",\r\n        //   introduction: \"1111111\",\r\n        //   name: \"2222222222\",\r\n        //   password: \"333333\",\r\n        //   role: \"gg\",\r\n        //   sex: \"greg\",\r\n        //   tel: \"13403945947\"\r\n        // }, {\r\n        //   date: '2016-05-03',\r\n        //   name: '王小虎',\r\n        //   province: '上海',\r\n        //   city: '普陀区',\r\n        //   address: '上海市普陀区金沙江路 1516 弄',\r\n        //   zip: 200333\r\n        // }],\r\n        loginFormRules: {\r\n        name: [\r\n          { required: true, message: '请输入用户名', trigger: 'blur' },\r\n          // { message: '长度最多不超过 12 个字符', trigger: 'blur' }\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' },\r\n          // { max: 10, message: '长度最多不超过 10 个字符', trigger: 'blur' }\r\n        ],\r\n        // text: [\r\n        //   { required: true, message: '请输入验证码', trigger: 'blur' },\r\n        //   // { max: 10, message: '长度最多不超过 10 个字符', trigger: 'blur' }\r\n        // ],\r\n        tel: [\r\n          { required: true, message: '请重新输入手机号码', trigger: 'blur' },\r\n          { pattern: /^((13[0-9])|(14[0-9])|(15[0-9])|(17[0-9])|(18[0-9])|(19[0-9]))\\d{8}$/, message: '请输入有效的手机号码' }\r\n          // { max: 10, message: '长度最多不超过 10 个字符', trigger: 'blur' }\r\n        ]\r\n      }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.carid{\r\n  display:none;\r\n}\r\n.demo-form-inline{\r\n  display:flex;\r\n  flex: left;\r\n}\r\n.el-form-item{\r\n    margin-bottom: 20px;\r\n}\r\n</style>"]}]}